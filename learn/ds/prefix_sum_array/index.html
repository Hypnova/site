<!--MCPT-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Prefix Sum Array – Learn Algorithms – MCPT</title>
  
  <!--Icon-->
  <link rel="icon" type="image/png" href="/icon.png">
  <!--Theme Colour-->
  <meta name="theme-color" content="#f48fb1">
  <!--Bootstrap-->
  <link href="/bootstrap/css/bootstrap.cur.css" rel="stylesheet">
  <!--MDB-->
  <link href="/mdb/css/mdb.cur.css" rel="stylesheet">
  <!--Fontawesome-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">
  <!--Prism-->
  <link rel="stylesheet" href="/prism/prism.css">
  <!--Custom Styles-->
  <link href="/stylesheet.css" rel="stylesheet">
  
  <!--JQuery-->
  <script src="/jquery/jquery.js"></script>
</head>

<body>
  <div class="page">
  <!--Navbar-->
  <header>
  <nav class="navbar navbar-dark primary-color">
    <button class="navbar-toggler hidden-sm-up" type="button" data-toggle="collapse" data-target="#navcollapse">
      <i class="fa fa-bars"></i>
    </button>

    <div class="container">
      <div class=" collapse navbar-toggleable-xs" id="navcollapse">
        <a class="navbar-brand waves-effect" href="/"><img src="/pics/silhouette.png" class="noseldrag" height="26px" width="26px" style="float:left;"> <strong>MCPT</strong></a>

        <ul class="nav navbar-nav">
          <li class="nav-item">
            <a class="nav-link waves-effect" href="/learn">Learn</a>
          </li>
          <li class="nav-item">
            <a class="nav-link waves-effect" href="/editorials">Editorials</a>
          </li>
          <li class="nav-item">
            <a class="nav-link waves-effect" href="/ranks">Ranks</a>
          </li>
          <li class="nav-item">
            <a class="nav-link waves-effect" href="/oj">Online Judge</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle waves-effect" type="button" id="dropdown1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Misc</a>
            <div class="dropdown-menu" aria-labelledby="dropdown1">
              <a class="dropdown-item" href="/calendar">Calendar</a>
              <a class="dropdown-item" href="/resources">Resources</a>
              <a class="dropdown-item" href="/about">About</a>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  </header>

  <main>
  <div class="container">
    <!--CONTENT-->
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/learn">Learn</a></li>
        <li><a href="/learn/ds">Data Structures</a></li>
        <li class="active">Prefix Sum Array</li>
      </ol>
    </div>
    
    <div class="row">
      <h1>Prefix Sum Array</h1>
      <hr>
    </div>
    
    <div class="row">
      <p>The prefix sum array is a data structure used to quickly solve range-sum queries. </p>

      <blockquote class = "blockquote">Given an array \(a\) of \(N\) integers, answer \(Q\) queries: the sum of all the elements in the range \([start, j]\)</blockquote>

      <p>To solve this problem, we could sum up the given range for each query, but that would be worst case \(\mathcal{O}(N)\) per query. If there are many queries, the program will be extremely slow. The fact that the array doesn't change throughout the query tells us that we must use preprocessing: <strong>prefix sum array</strong>!</p>
      
      <p>There are \(N^2\) unique ranges in an array. Creating a \(N^2\) sized array to hold the sums of each possible range would be excessive. The prefix sum array only uses a \(N\) sized array.</p>
      
      <p>Like in the name, the array holds the sum of all the elements before the given index. <code>ps[]</code> of the prefix sum array contains the sum of the array indices \([0, i)\).</p>
      
      <hr>
      
      <p>Given the following array</p>
      
      <img class="img-fluid" src="/pics/prefix_sum_array1.png"><br>
      
      <p>The prefix sum array will look like: </p>
      
      <img class="img-fluid" src="/pics/prefix_sum_array2.png"><br>
      
      <hr>
      
      <img class="img-fluid" src="/pics/prefix_sum_array3.png"><br>
      
      <p><code>ps[4]</code> has a value of <code>6</code>. It corresponds to the sum of the range \([0, 3]\). </p>
      
      <img class="img-fluid" src="/pics/prefix_sum_array4.png"><br>
      
      <p>Say we want only the range \([2, 3]\). We have 2 extra elements in the sum, so we must subtract them. </p>
      
      <img class="img-fluid" src="/pics/prefix_sum_array5.png"><br>
      
      <p>The subtracted region is the first two elements: <code>ps[2]</code>. </p>
      
      <img class="img-fluid" src="/pics/prefix_sum_array6.png"><br>
      
      <p>It adds up. We want the sum of the range \([2, 3]\). <code>-2 + 1 = -1 = ps[4] - ps[2] = 6 - 7</code></p>

      <p>In short, the sum of the range \([start, end]\) is <code>ps[end + 1] - ps[start]</code>. </p>
      
      <p>You may have noticed that the prefix sum array has an extra element, the <code>0</code> at the start of the array. This makes it more convenient to handle queries asking for the sum of the range \([0,end]\).</p>
      
    </div>
    
    <div class="row">    
      <h1 class="h1-responsive">Implementation</h1>
      <hr>

      <p>Creating a prefix sum array is relatively easy, as shown in the code snippet below:</p>

      <pre class="language-java"><code>
        // a is the original array
        int[] ps = new int[a.length + 1]; // one extra element, the 0 at the start of the prefix sum array

        for(int i = 1; i &lt;= a.length; i++) {
            ps[i] = ps[i - 1] + a[i - 1];
        }
      </code></pre>

      <p>Finding the sum between any two indexes of a given array can be implemented as below:</p>

      <pre class="language-java"><code>
        // 0 &lt;= start &le; end &lt; original array length
        public static int query (int start, int end) {
            return ps[end + 1] - ps[start];
        }
      </code></pre>
    
      <p>Notice that when querying for the range \([0, i]\), <code>ps[start] = 0</code> due to the extra element appended to the start. Without this element (or an if statement to handle the special case where <code>start == 0</code>), the snippet would return an incorrect answer.</p>
    </div>
        
    <div class="row">
      <h2 class="h2-responsive">Time Complexity</h2>
        
      <p><strong>Construction: </strong> \(O (N)\), where \(N\) is the size of the original array.</p>
      <p><strong>Sum Query: </strong> \(O (1)\)</p>
    </div>
      
    <div class="row">
      <h2 class="h2-responsive">Space Complexity</h2>
        
      <p>\(O (N)\), where \(N\) is the size of the original array.</p>
    </div>
    
    <div class="row">
      <hr>
      <p>The prefix sum array is a data structure which allows fast calculation of the sum of a given range of numbers. With the prefix sum array, the total runtime to solve the given problem is now \(O (N + Q)\), which is a large improvement over the naive solution.</p>
      
      <h1 class = "h1-responsive">Practice</h1>
      <hr>

      <ul class = "large-list">
        <li><a href="https://dmoj.ca/problem/dmopc14c2p4">DMOPC '14 Contest 2 P4: Deforestation</a></li>
        <li><a href="https://dmoj.ca/problem/gfssoc2j4">GFSSOC '14 Spring P4: Marathon</a></li>
        <li><a href="https://dmoj.ca/problem/mwc15c7p2">MWC '15 Contest 7 P2: Thief in the Night</a></li>
      </ul>

    </div>
    
  </div>
  </main>
    
  <!--Footer-->
  <footer class="page-footer primary-color center-on-small-only">
    <div class="footer-copyright">
      <div class="container-fluid">
        &copy 2016 mcpt.ca
      </div>
    </div>
  </footer>
  </div>
  
  <!--Scripts-->
  <script src="/ga.js"></script>
  <script src="/prism/prism.js"></script>
  <script type="text/javascript" src="/bootstrap/js/bootstrap.cur.js"></script>
  <script type="text/javascript" src="/mdb/js/mdb.cur.js"></script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
  <script src="/script.js"></script>
  
</body>
</html>
